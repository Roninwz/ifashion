if("undefined"==typeof CYZS)var CYZS={};if(CYZS.Config={},CYZS.Config.BASE_API_URL="pc.php",CYZS.Config.URL_PROXY="/",CYZS.Config.DFS_URL="//image1.ichuanyi.cn/","undefined"==typeof CYZS)var CYZS={};var isDebug=!0;if(CYZS.Debug=function(){},CYZS.Debug.alert=function(e){try{isDebug&&alert(e)}catch(r){console.log("CYZS Error:: CYZS_Debug.alert")}},CYZS.Debug.log=function(){try{if(isDebug)for(var e in arguments)console.log(arguments[e])}catch(r){console.log("CYZS Error:: CYZS_Debug.log")}},CYZS.BaseViewEvent=function(){},CYZS.BaseViewEvent.EL_INIT_COMPLETE="CYZS.BaseViewEvent.EL_INIT_COMPLETE",_.extend(Backbone.View,Backbone.Events),CYZS.BaseView=Backbone.View.extend({INIT_VIEW_DELAY:10,initialize:function(e){e&&(this.dataObj=e.dataObj),this.initElView()},initElView:function(){if(this.tplId){var e=template(this.tplId,this.dataObj);this.$el.html(e),this.bindLazyLoad()}},bindLazyLoad:function(e,r){if($&&$.fn.lazyload){e||(e="");var t=this;setTimeout(function(){t.$el.find(e+" img.lazy").each(function(){void 0==$(this).attr("src")&&$(this).lazyload({effect:"fadeIn",threshold:300})})},100)}},elInitComplete:function(){this.trigger(CYZS.BaseViewEvent.EL_INIT_COMPLETE)}}),CYZS.ModuleView=CYZS.BaseView.extend({initialize:function(){CYZS.BaseView.prototype.initialize.apply(this,arguments)},setPageTitle:function(e){e?document.title=e:document.title="穿衣助手 官方网站—每天都要美美搭！"},initBreadcrumb:function(e){var r=0,t={container:"#breadcrumb-container"},i=$.extend({},t,e);for(var o in i.links)r++,""==i.links[o].link&&(i.links[o].link="javascript:void(0);");i.linksLength=r;var a=template("breadcrumbTpl",i);$(i.container).html(a)}}),CYZS.PageView=CYZS.ModuleView.extend({initialize:function(){CYZS.ModuleView.prototype.initialize.apply(this,arguments),$(".page-container").css({"min-height":window.innerHeight-$(".header-container").height()-$(".footer-container").height()+"px"})}}),"undefined"==typeof CYZS)var CYZS={};if(CYZS.AjaxHelper=function(){},CYZS.AjaxHelper.ajax=function(e,r){e.ajaxInvokeTryCount=0,e.AJAX_MAX_TRY=3,e.dataType||(e.dataType="json");var t=CYZS.Util.getValueFromHrefByKey("f");t&&e.data&&(e.data.f=t);var i=CYZS.Util.getValueFromHrefByKey("pr");i&&e.data&&(e.data.pr=i),e.url||(e.url=CYZS.Config.URL_PROXY+CYZS.Config.BASE_API_URL);var o=CYZS.AjaxHelper.ajax.caller.caller;e.success=function(r){if(r){if(1e4==r.result)return void(location.href="/?method=user.login");if(7606==r.result)alert(r.msg.message);else{if(200==r.result)return e.ajaxInvokeTryCount<=e.AJAX_MAX_TRY&&$.ajax(e),void e.ajaxInvokeTryCount++;if(r.result>0)return alert(r.msg.message),void console.log("ajax error-> result: "+r.result+" | method: "+r.method,r)}}e.onSuccess&&e.onSuccess.apply(o,[r])},e.error=function(r){return r&&1e4==r.result?void(location.href="/?method=user.login"):(console.log("fatal error! ",r),void(e.onError&&e.onError.apply(o,[r])))},$.ajax(e)},"undefined"==typeof CYZS)var CYZS={};if(CYZS.Util=function(){},CYZS.Util.getValueFromHrefByKey=function(e){var r=window.location.href,t=r.split("?"),i="";if(t[0]==r)return i;var o=t[1];t=o.split("&");for(var a=0;a<t.length;a++){o=t[a];var n=o.split("=");n.length<=1||n[0]==e&&(i=n[1])}return i},CYZS.Util.formatImageCDNUrl=function(e,r){var t="";if(!e)return"";if(t=e.match("http://")?e:CYZS.Config.DFS_URL+e,r){var i=r.width||100,o=r.quality||60;t+="?imageMogr/v2/auto-orient/thumbnail/"+i+"x/quality/"+o+"/format/jpg"}return t},CYZS.Util.formatDFSUrl=function(e){return!e||e.match("http://")||e.match("https://")||e.match("//")||(e=CYZS.Config.DFS_URL+e),e&&0==e.toString().indexOf("//")&&(e=location.protocol+e),e},CYZS.Util.formatTimeStrBySeconds=function(e){var r=CYZS.Util.formatTimeObjBySeconds(e),t="";for(var i in r)r[i]<10&&(r[i]="0"+r[i]);return r.day>0&&(t+=r.day+"天"),t+=r.hour+"时",t+=r.minute+"分",t+=r.second+"秒"},CYZS.Util.formatTimeObjBySeconds=function(e){var r={};return r.second=e%60,e=Math.floor(e/60),r.minute=e%60,e=Math.floor(e/60),r.hour=e%24,r.day=Math.floor(e/24),r},CYZS.Util.formatLinkUrl=function(e,r){return e=r?e.replace("http://","cyzs://"):e.replace("cyzs://","http://")},CYZS.Util.getDeltaTimeDisplay=function(e){var r=new Date,t=Math.floor(r.getTime()/1e3)-e;if(3600>t)return"刚刚";if(86400>t)return Math.floor(t/3600)+"小时前";if(604800>t)return Math.floor(t/86400)+"天前";var r=new Date(1e3*e);return r.getMonth()+1+"月"+r.getDate()+"日"},Date.prototype.format=function(e){var r={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var t in r)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[t]:("00"+r[t]).substr((""+r[t]).length)));return e},CYZS.Util.setATagOpenInNewTab=function(){$("a").each(function(){$(this).attr("target")||$(this).attr("target","_blank")})},CYZS.Util.renderQRCode=function(e,r){var t=CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_IE),i="canvas";t&&(i="table"),r.render||(r.render=i),t?setTimeout(function(){e.qrcode(r)},100):e.qrcode(r)},CYZS.Util.getHostName=function(){return window.location.protocol+"//"+window.location.hostname},"undefined"==typeof CYZS)var CYZS={};if(CYZS.BusinessDataHelper=function(){},CYZS.BusinessDataHelper.formatSuitData=function(e,r){var t=e;t=CYZS.BusinessDataHelper.formatCommonProp(t),t.avatar=CYZS.Util.formatDFSUrl(t.avatar),t.publishTime=CYZS.Util.getDeltaTimeDisplay(t.time);var i=t.markList;for(var o in i){var a=i[o];i[o].left=a.x/100*t.imageActualWidth,i[o].top=a.y/100*(t.imageActualWidth/t.width*t.height)-20,"right"==a.direction?(i[o].isDirLeft=!1,i[o].tagWidth=i[o].left+"px"):(i[o].isDirLeft=!0,i[o].tagWidth=t.imageActualWidth-i[o].left+"px")}return t},CYZS.BusinessDataHelper.formatGoodsData=function(e,r){var t=e;return t=CYZS.BusinessDataHelper.formatCommonProp(t)},CYZS.BusinessDataHelper.formatCommonProp=function(e,r){var t=e;if(t.imageActualWidth&&(t.imageActualHeight=t.imageActualWidth/t.width*t.height),void 0!=t.price&&t.price!=t.originalPrice){t.discount=(10*t.price/t.originalPrice).toFixed(1);var i=t.discount,o=i.split(".");0==o[1]&&(t.discount=o[0])}return t.image=CYZS.Util.formatDFSUrl(t.image),t},"undefined"==typeof CYZS)var CYZS={};if("undefined"==typeof CYZS.BrowserHelper&&(CYZS.BrowserHelper={}),CYZS.BrowserHelper.BROWSER_TYPE_IE="microsoft internet explorer",CYZS.BrowserHelper.BROWSER_TYPE_IE6="msie 6.0",CYZS.BrowserHelper.BROWSER_TYPE_IE7="msie 7.0",CYZS.BrowserHelper.BROWSER_TYPE_IE8="msie 8.0",CYZS.BrowserHelper.BROWSER_TYPE_CHROME="chrome",CYZS.BrowserHelper.BROWSER_TYPE_NETSCAPE="netscape",CYZS.BrowserHelper.BROWSER_TYPE_OPERA="opera",CYZS.BrowserHelper.BROWSER_TYPE_FIREFOX="firefox",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_ANDROID="android",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE="iphone",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD="ipad",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPOD="ipod",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_NOKIAN="NokiaN",CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS="app/cyzs",CYZS.BrowserHelper.BROWSER_TYPE_WE_CHAT="micromessenger",CYZS.BrowserHelper.BROWSER_TYPE_WEI_BO="weibo",CYZS.BrowserHelper.BROWSER_TYPE_LAI_WANG="aliapp",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_QQ="mqqbrowser",CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_APP_QQ=" qq/",CYZS.BrowserHelper.checkDict=null,CYZS.BrowserHelper.check=function(e){return e==CYZS.BrowserHelper.BROWSER_TYPE_IE?-1!=navigator.appName.toLowerCase().indexOf(e)&&document.all:e==CYZS.BrowserHelper.BROWSER_TYPE_OPERA?-1!=navigator.appName.toLowerCase().indexOf(e):-1!=navigator.userAgent.toLowerCase().indexOf(e)},CYZS.BrowserHelper.checkIsIOSApp=function(){var e=CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS)&&(CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPOD));return e},CYZS.BrowserHelper.getCheckDict=function(){if(CYZS.BrowserHelper.checkDict){var e={};e[CYZS.BrowserHelper.BROWSER_TYPE_IE]=-1!=navigator.appName.indexOf("Microsoft Internet Explorer")&&document.all,e[CYZS.BrowserHelper.BROWSER_TYPE_IE6]="-1"!=navigator.userAgent.split(";")[1].toLowerCase().indexOf("msie 6.0"),e[CYZS.BrowserHelper.BROWSER_TYPE_IE7]="-1"!=navigator.userAgent.split(";")[1].toLowerCase().indexOf("msie 7.0"),e[CYZS.BrowserHelper.BROWSER_TYPE_IE8]="-1"!=navigator.userAgent.split(";")[1].toLowerCase().indexOf("msie 8.0"),e[CYZS.BrowserHelper.BROWSER_TYPE_CHROME]=navigator.userAgent.indexOf("Chrome")>-1,e[CYZS.BrowserHelper.BROWSER_TYPE_NETSCAPE]=-1!=navigator.userAgent.indexOf("Netscape"),e[CYZS.BrowserHelper.BROWSER_TYPE_OPERA]=-1!=navigator.appName.indexOf("Opera"),e[CYZS.BrowserHelper.BROWSER_TYPE_FIREFOX]=-1!=navigator.userAgent.indexOf("Firefox"),e[CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_ANDROID]=-1!=navigator.userAgent.toLowerCase().indexOf("android"),e[CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE]=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),e[CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD]=-1!=navigator.userAgent.toLowerCase().indexOf("ipad"),e[CYZS.BrowserHelper.BROWSER_TYPE_APP_CYZS]=-1!=navigator.userAgent.toLowerCase().indexOf("app/cyzs"),CYZS.BrowserHelper.checkDict=e}return CYZS.BrowserHelper.checkDict},CYZS.BrowserHelper.checkIsMobile=function(){var e=CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPHONE)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPAD)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_IPOD)||CYZS.BrowserHelper.check(CYZS.BrowserHelper.BROWSER_TYPE_MOBILE_ANDROID);return e},"undefined"==typeof CYZS)var CYZS={};CYZS.UrlHelper=function(){},CYZS.UrlHelper.URL_SUIT_DETAIL="suit_detail",CYZS.UrlHelper.URL_SHOPKEEPER="shopkeeper",CYZS.UrlHelper.URL_DICT={},CYZS.UrlHelper.URL_DICT[CYZS.UrlHelper.URL_SUIT_DETAIL]="pc/page/core/suit/index.html?viewUserId={viewUserId}&suitId={suitId}",CYZS.UrlHelper.URL_DICT[CYZS.UrlHelper.URL_SHOPKEEPER]="pc/page/shop_owner/index.html?viewUserId={viewUserId}",CYZS.UrlHelper.getUrl=function(e,r){var t=CYZS.UrlHelper.URL_DICT[e];for(var i in r)t=t.replace("{"+i+"}",r[i]);return t="/"+t},CYZS.UrlHelper.autoSwitchUrlByUA=function(){var e="",r="";CYZS.BrowserHelper.checkIsMobile()?(e="/pc/",r="/m/"):(e="/m/",r="/pc/");var t=window.location.href;if(-1!=t.indexOf(e)){for(var i=CYZS.UrlHelper.URL_REDIRECT_DICT,o=i.length,a=!1,n=0;o>n;n++)if(-1!=t.indexOf(i[n])){a=!0;break}a&&(t=t.replace(e,r),window.location.replace(t))}},CYZS.UrlHelper.URL_REDIRECT_DICT=["/page/card/goods/","/page/card/suit/","/page/card/user/","/page/activity/night_market_eight/","/page/media/","/page/core/goods/","/page/core/suit/","/page/shop_owner/"],CYZS.UrlHelper.autoSwitchUrlByUA();